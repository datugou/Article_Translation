# 数据科学产品化
_作者：[**Tad Slaff**](https://medium.com/@tad.slaff_77912/about)_  
_原文链接：<https://blog.picnic.nl/data-science-as-a-product-f383dead5aa4>_  
_2020 年 10 月 13 日_  
`Machine Learning` `Data Science` `Product Development`  

---
在 Picnic，我们将自己所做的视为杂货商场的高科技解决方案。
从应用程序专用商店、20 分钟送货窗口和及时供应链，技术和基础数据对 Picnic 的发展至关重要。

作为 Picnic 内部的数据科学团队，我们的工作是将数据驱动的决策提升到一个新的水平。
我们负责构建自动化系统，这些系统具有智能、上下文和授权，可以做出影响每年数千万欧元业务的决策。

然而，建立这些系统是很难的。
而让它们投入生产并被企业使用则更难。
让我们来了解一下在 Picnic 公司将数据科学项目产品化的过程，我们亲切地称之为“数据科学产品化”。

## 为什么这么难？
2019 年 7 月的一项研究发现，[87% 的数据科学项目无法投入生产](https://venturebeat.com/2019/07/19/why-do-87-of-data-science-projects-never-make-it-into-production/)。
所列举的原因有很多，从缺乏领导层的支持、数据源的孤岛、缺乏合作等，应有尽有。
除了这些问题之外，还有一些固有的方面使得数据科学和机器学习项目与其他软件开发不同。

首先，数据科学，尤其是机器学习，活在概率和不确定性的世界里。
一个基于机器学习的监测支付欺诈模型的典型输出会是这样的：“这个订单被欺诈的概率是 73%+/-5%，置信区间为 95%”。
我们在商业方面的同行则生活在一个决定论的世界里，“我们要阻止所有的欺诈性订单”。
在这俩个世界之间进行转换并不是一件容易的事情。

此外，在数据科学项目中，有一种不连贯性，（通常）在“传统”软件开发中不会出现。
在我们开始构建一个模型之前，我们不知道它的性能如何。
可能需要一周、三个月的时间，也可能无法获得可接受的性能水平。
这使得我们很难把漂亮的项目计划与时间表和可交付成果放在一起，而这才是企业希望看到的。

最后，在将模型发布到生产中时，让别人信任我们的模型是非常重要的。
当与业务合作将一个模型产品化时，我们进入了一个他们是专家的领域。
在许多情况下，我们希望将一个手动流程自动化，或者替换一套精心设计的业务规则。
虽然这些规则并不完美，但它们是由那些对业务有深刻理解的人建立的。
交出一个黑盒式的机器学习算法，并告诉企业它要取代他们当前的工作方式是一项具有挑战性的任务。
说到底，无论模型要自动化的是什么流程，盈亏都是企业的，而我们作为数据科学家，需要说服他们把自己的生计交给我们的模型。

根据我们的经验，可以通过以下因素成功实现大部分领域的模型产品化：
1. 用例选择
2. 业务调整
3. 敏捷（数据科学）开发

## 用例选择
> “我想，如果你唯一的工具是一把锤子的话，就很容易把所有的东西都当成钉子来对待。”----Abraham Maslow

可以通过机器学习解决的问题有太多了。
你在客户成功、供应链、分销、金融等领域有无数的用例。
鉴于在 Picnic 精心维护的数据仓库中可以轻松访问高质量的数据，你很难知道从哪里开始。
选择正确的用例对数据科学项目的成功至关重要。

那么，你要如何决定选择什么用例呢？
- 最有商业价值的用例？
- 能快速赢利的“获取成本低”的用例？
- 符合公司战略目标的用例？

在 Picnic，我们会考虑这些因素，但关键的决定性因素归结为一点：

**机器学习是解决这个问题的最佳方法吗？**我们对‘Yes’答案有多大信心？

（还记得我说过我们这些数据科学家习惯于概率思维吗😉？）

我们要确保数据科学家的时间得到最有效的利用。
比方说有一个引人注目的问题可以产生巨大的价值，但是几个精心设计的业务规则可以让我们获得 80% 的价值。
让数据科学团队花上几个月的时间来获取额外的 10% 的价值，是对资源的最佳利用吗？
可能不是。

利用我们的[数据科学之禅](https://blog.picnic.nl/the-art-and-science-of-data-science-80e215f92a99)原则来指导我们，我们可以将用例选择标准分解为几个部分:
1. 我们是否有足够的干净、高质量的数据来对问题进行建模？
2. 我们是否有一个明确的目标标准（或损失函数）来优化？
3. 业务是否已经准备好将这个流程自动化？
4. 它将如何融入生产系统？该产品团队是否有带宽来实施它？
5. 是否有关于成功的机器学习实施的案例研究、研究论文或其他资源来解决这类问题？
6. 我们是否有任何偏见或道德问题需要解决？

如果对这些问题有顾虑，我们会重新考虑需要接手这个项目的最佳团队是否是我们团队。

无论你有多少资源可以投入到一个问题上，如果没有正确的用例，成功的几率都很低。

## 业务调整
> 如果在开始的时候就记录下所有的未知性，完美的项目计划就有可能实现。----Bill Langley

确保项目目标的一致性似乎既简单又明显。
企业希望得到更准确的预测。
你有信心可以打败现有的系统。
那么问题是什么？

问题在于，这不仅仅是关乎模型的性能。

比方说，你建立了一个伟大的模型，并设置了一个日常工作让它执行。
很好，企业需要能够全天更新他们的预测。
本来你的模型在大多数文章/细分市场/区域上表现良好，但本季度要推出一个新产品。
突然间，来了一个新的实时服务。
现在你的模型需要在没有历史数据的情况下进行预测（冷启动问题来了）。

机器学习项目需要企业对系统如何工作有一定程度的了解。
他们需要知道机器学习模型的内在优势和弱点，如何处理边缘情况，以及使用什么特征。

除此之外，你还需要知道模型将如何使用。
预期的输出是什么？
预测结果将如何被使用？
如果模型运行不了怎么办，需要有一个回退机制吗？
当你在开始开发之前就知道这些问题的答案时，就可以省去很多头疼的问题、紧张的讨论和深夜的返工。

模型信任的问题又来了。
如果企业不信任你的模型输出会怎样？

你可以展示所有你想要的 ROC 曲线、F1 分数和测试集性能，但如果你的模型做出的前几个预测恰好是错误的，它会有机会恢复吗？
之前的基本业务规则并不是很好，但业务知道在哪些情况下它工作得很好，什么时候不好，然后可以进行相应的干预。
你的模型（希望）对业务有影响，如果业务不信任它们，它们就不会被使用。
就这么简单。

关于模型信任的讨论是不舒服的，但必不可少。
你需要事先了解企业需要什么才能在生产中使用你的模型。
至少，需要决定一个带有性能指标的评估期，并由双方签字认可。

数据科学家和业务之间的期望值不同，导致了很多数据科学项目的结束。
在花费几个月的时间进行**开发之前**，就需要进行谈论。
你的模型的生命可能取决于它。

## 敏捷数据科学开发或...
### MVP 高于 POC
“当你在募资的时候，是 AI。当你在招聘的时候，是 ML。当你在实施的时候，是线性回归。当你在调试的时候，是 printf()。”----Baron Schwartz

敏捷开发已经成为软件开发的标准，但还没有进入数据科学领域（尚未）。
今天的数据科学项目往往以“建立它，就会有人来用”的心态发生。
数据科学家与业务部门开会讨论问题，决定要优化什么指标，并询问他们如何获得数据。
然后他们去花几个月的时间建立一个漂亮的、强大的模型，并提交成品。
然后.....

...就用不上了。
敏捷开发有效的核心原因同样可以应用于数据科学：它需要以客户为中心。

有效的做法是跳过概念验证（proof of concept，POC），它往往永远不会离开数据科学家的笔记本电脑，而专注于创建一个最小可行的产品（minimum viable product，MVP）。

对于 MVP 来说，目标是尽快构建一个端到端解决方案。
你建立数据管道，从一个基本的基线模型（也称为线性或逻辑回归）开始，并将预测结果暴露给最终消费者。
这里有一个真实的例子，[我们如何使用机器学习找到最佳的投放时间](https://blog.picnic.nl/the-trade-off-between-efficiency-and-being-on-time-optimizing-drop-times-using-machine-learning-d3f6fb1b0f31)。

这已经成为软件开发中的事实标准，同样的思想也可以应用到机器学习中。
我们正在做的事情就是遵循[敏捷宣言](https://agilemanifesto.org/)的核心原则：

#### 专注于工作软件
- 不要把时间花在微调一个可能永远不会被使用的模型上。
而是把时间花在打造一个可行的产品上。

#### 客户合作
- 尽可能缩短上市时间，让你的“客户”看到的输出就像来自一个更复杂的系统一样。
你可以在此基础上进行迭代和改进。

#### 应对变化
- 在第二周发现要改动的地方远比第二季度发现更好。
也许你计划集成的内部构建系统没有办法暴露你需要的数据。
要灵活处理需求，并尽早和经常地交付工作代码。

数据科学项目的难点不在于建模，而是其他一切。
通过专注于 MVP，你可以更快地将一个工作系统投入生产，输出预测。
你会更快地发现问题，并在几周内而不是几个月内给你的客户一个新的、闪亮的模型。

最后，我们的目标不是为了建立一个模型而建立一个模型。
我们正在构建一个产品，只有其中一个组件是一个模型。
而我们可以从几十年的产品开发中吸取经验来实现我们的目标。

## 结论
构建基于机器学习的产品并不容易。
你需要拥有软件开发的所有组件，其核心是机器学习的附加复杂性。
这是一个新领域，没有如何做好它的蓝图。
通过确保您选择了正确的用例，与业务保持一致，并遵循屡试不爽的敏捷软件开发实践，你就可以为自己的成功做好准备。

在 Picnic，技术、数据和机器学习是我们的核心。
我们拥有一群极富才华的数据科学家，一个[可扩展的自助式数据科学平台](https://blog.picnic.nl/building-and-scaling-picnics-data-science-environment-aae21e01f619)，以及业务的全力支持，让我们的模型投入生产。

如果这听起来是你喜欢的地方，那就来加入我们，一起打造地球上最好的‘送奶工’吧!

---
[返回目录](https://github.com/datugou/Article_Translation/tree/master/LEARNING_data_science)
